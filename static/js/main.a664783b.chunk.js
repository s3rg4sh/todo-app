(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{16:function(t,e,n){},18:function(t,e,n){"use strict";n.r(e);var c,o=n(1),a=n(9),r=n.n(a),l=(n(14),n(15),n(16),n(2)),i=n(3),d=n(4),u=n(5),s=n.n(u),f=n(0),b=function(t){var e=t.todo,n=t.processingIds,c=t.onDelete,a=t.onUpdate,r=e.id,i=e.title,u=e.completed,b=Object(o.useState)(!1),j=Object(d.a)(b,2),p=j[0],m=j[1],O=Object(o.useState)(e.title),h=Object(d.a)(O,2),v=h[0],x=h[1],y=Object(o.useRef)(null);Object(o.useEffect)((function(){y.current&&y.current.focus()}),[p]);var g=function(){switch(v.trim()){case"":c(e.id);break;case e.title:m(!1);break;default:a(Object(l.a)(Object(l.a)({},e),{},{title:v}))}m(!1)};return Object(f.jsxs)("li",{className:s()("todo",{completed:u,editing:p}),children:[Object(f.jsx)("label",{className:"todo__status-label",htmlFor:"toggle-view-".concat(r),children:Object(f.jsx)("input",{type:"checkbox",className:"todo__status",id:"toggle-view-".concat(r),onClick:function(){return t=e,void a(Object(l.a)(Object(l.a)({},t),{},{completed:!t.completed}));var t}})}),p?Object(f.jsx)("form",{onSubmit:function(t){t.preventDefault(),g(),m(!1)},children:Object(f.jsx)("input",{"data-cy":"TodoTitleField",type:"text",ref:y,className:"todo__title-field",placeholder:"Empty todo will be deleted",defaultValue:e.title,onChange:function(t){return x(t.target.value)},onBlur:g,onKeyUp:function(t){"Escape"===t.key&&m(!1)}})}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("span",{className:"todo__title",onDoubleClick:function(){return m(!0)},children:i}),Object(f.jsx)("button",{type:"button",className:"todo__remove","aria-label":"Delete Todo",onClick:function(){return c(r)},children:"x"})]}),Object(f.jsxs)("div",{"data-cy":"TodoLoader",className:s()("modal overlay",{"is-active":n.includes(r)}),children:[Object(f.jsx)("div",{className:"modal-background has-background-white-ter"}),Object(f.jsx)("div",{className:"loader"})]})]})},j=function(t){var e=t.todos,n=t.processingIds,c=t.onDelete,o=t.onUpdate,a=t.tempTodo,r=a?[].concat(Object(i.a)(e),[a]):e;return Object(f.jsx)("section",{className:"todoapp__main",children:r.map((function(t){return Object(f.jsx)(b,{todo:t,onDelete:c,onUpdate:o,processingIds:n},t.id)}))})};!function(t){t.all="all",t.active="active",t.completed="Completed"}(c||(c={}));var p,m=function(t){var e=t.todos,n=t.filterBy,o=t.setFilterBy,a=t.clearCompleted,r=function(t){return function(){o(t)}},l=e.filter((function(t){return t.completed})).length,i=e.filter((function(t){return!t.completed})).length;return Object(f.jsxs)("footer",{className:"todoapp__footer",children:[Object(f.jsx)("span",{className:"todo-count","data-cy":"todosCounter",children:"".concat(i," items left")}),Object(f.jsxs)("nav",{className:"filter","data-cy":"Filter",children:[Object(f.jsx)("a",{href:"#/",className:s()("filter__link",{selected:n===c.all}),onClick:r(c.all),children:"All"}),Object(f.jsx)("a",{href:"#/completed",className:s()("filter__link",{selected:n===c.completed}),onClick:r(c.completed),children:"Completed"}),Object(f.jsx)("a",{href:"#/active",className:s()("filter__link",{selected:n===c.active}),onClick:r(c.active),children:"Active"})]}),Object(f.jsx)("button",{"data-cy":"ClearCompletedButton",type:"button",className:s()("todoapp__clear-completed",{hidden:!l}),onClick:a,disabled:!l,children:"Clear completed"})]})};!function(t){t.addError="Unable to add a todo",t.deleteError="Unable to delete a todo",t.updateError="Unable to update a todo",t.loadError="Unable to load todos",t.emptyTitle="Title can't be empty"}(p||(p={}));var O="https://mate.academy/students-api";function h(t){return new Promise((function(e){setTimeout(e,t)}))}function v(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,c={method:e};return n&&(c.body=JSON.stringify(n),c.headers={"Content-Type":"application/json; charset=UTF-8"}),h(300).then((function(){return fetch(O+t,c)})).then((function(t){if(!t.ok)throw new Error;return t.json()}))}var x=function(t){return v(t)},y=function(t,e){return v(t,"POST",e)},g=function(t,e){return v(t,"PATCH",e)},_=function(t){return v(t,"DELETE")},N=11357,k=function(){var t=Object(o.useState)([]),e=Object(d.a)(t,2),n=e[0],a=e[1],r=Object(o.useState)(!1),u=Object(d.a)(r,2),b=u[0],O=u[1],h=Object(o.useState)(null),v=Object(d.a)(h,2),k=v[0],C=v[1],E=Object(o.useState)(""),T=Object(d.a)(E,2),w=T[0],S=T[1],I=Object(o.useState)(null),U=Object(d.a)(I,2),D=U[0],B=U[1],F=Object(o.useState)(c.all),A=Object(d.a)(F,2),J=A[0],M=A[1],P=Object(o.useState)([]),L=Object(d.a)(P,2),G=L[0],H=L[1],K=function(t){O(!0),C(t),setTimeout((function(){O(!1),C(null)}),3e3)},R=Object(o.useMemo)((function(){switch(J){case c.active:return n.filter((function(t){return!t.completed}));case c.completed:return n.filter((function(t){return t.completed}));default:return n}}),[J,n]),V=n.filter((function(t){return t.completed})).length===n.length,W=n.filter((function(t){return!t.completed})).length===n.length,q=function(){S(""),O(!1),C(null)},z=function(t){var e;H((function(e){return[].concat(Object(i.a)(e),[t])})),(e=t,_("/todos/".concat(e))).then((function(){return a((function(e){return e.filter((function(e){return e.id!==t}))}))})).catch((function(){K(p.deleteError)})).finally((function(){return H([])}))},Q=function(t){H((function(e){return[].concat(Object(i.a)(e),[t.id])}));var e=n.filter((function(e){return e.id===t.id}))[0],c=n.indexOf(e);(function(t){var e=t.id,n=t.title,c=t.completed,o=t.userId;return g("/todos/".concat(e),{id:e,title:n,completed:c,userId:o})})(t).then((function(){return a((function(e){return[].concat(Object(i.a)(e.slice(0,c)),[t],Object(i.a)(e.slice(c+1)))}))})).catch((function(){K(p.updateError)})).finally((function(){return H([])}))};return Object(o.useEffect)((function(){var t;(t=N,x("/todos?userId=".concat(t))).then((function(t){a(t)})).catch((function(){K(p.loadError)}))}),[]),Object(f.jsxs)("div",{className:"todoapp",children:[Object(f.jsx)("h1",{className:"todoapp__title",children:"todos"}),Object(f.jsxs)("div",{className:"todoapp__content",children:[Object(f.jsxs)("header",{className:"todoapp__header",children:[n.length>0&&Object(f.jsx)("button",{type:"button","aria-label":"button",onClick:function(){V||W?n.map((function(t){return Q(Object(l.a)(Object(l.a)({},t),{},{completed:!t.completed}))})):n.map((function(t){return!t.completed&&Q(Object(l.a)(Object(l.a)({},t),{},{completed:!t.completed}))}))},className:s()("todoapp__toggle-all",{active:V})}),Object(f.jsx)("form",{onSubmit:function(t){if(t.preventDefault(),w.trim()){var e={id:Math.max.apply(Math,Object(i.a)(n.map((function(t){return t.id}))))+1,title:w,userId:N,completed:!1};B(Object(l.a)(Object(l.a)({},e),{},{id:0})),H((function(t){return[].concat(Object(i.a)(t),[0])})),function(t){var e=t.id,n=t.title,c=t.completed,o=t.userId;return y("/todos",{id:e,title:n,completed:c,userId:o})}(e).then((function(t){a((function(e){return[].concat(Object(i.a)(e),[t])})),q()})).catch((function(){B(null),K(p.addError)})).finally((function(){B(null),H([])})),q()}else K(p.emptyTitle)},children:Object(f.jsx)("input",{type:"text",className:"todoapp__new-todo",placeholder:"What needs to be done?",value:w,onChange:function(t){return S(t.target.value)},disabled:!!D})})]}),Object(f.jsx)(j,{todos:R,onDelete:z,onUpdate:Q,processingIds:G,tempTodo:D}),n.length>0&&Object(f.jsx)(m,{todos:n,filterBy:J,setFilterBy:M,clearCompleted:function(){n.map((function(t){return t.completed&&(H((function(e){return[].concat(Object(i.a)(e),[t.id])})),z(t.id)),t}))}})]}),b&&Object(f.jsxs)("div",{className:"notification is-danger is-light has-text-weight-normal",children:[Object(f.jsx)("button",{type:"button",className:"delete","aria-label":"button",onClick:function(){return O(!1)}}),k,Object(f.jsx)("br",{})]})]})};r.a.render(Object(f.jsx)(k,{}),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.a664783b.chunk.js.map